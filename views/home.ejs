<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URL Shortener</title>
    <style>
      body { font-family: Arial, sans-serif; padding: 20px; background: #f9fafb; color: #333; }
      h1 { text-align: center; color: #2563eb; }
      form { max-width: 600px; margin: 20px auto; padding: 15px; background: white; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); display:flex; gap:10px; }
      input[type="url"] { flex:1; padding:10px; border:1px solid #ccc; border-radius:5px; }
      button { padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:5px; cursor:pointer; }
      button:hover { background:#1d4ed8; }

      table { width: 100%; max-width: 800px; margin: 20px auto; border-collapse: collapse; background:white; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
      th, td { padding: 12px 15px; border:1px solid #ddd; text-align: center; }
      th { background: #2563eb; color: white; }
      tr:nth-child(even) { background: #f1f5f9; }
      tr:hover { background: #e0e7ff; }
      .short-link { color: #16a34a; text-decoration: none; font-weight:600; }
    </style>
  </head>
  <body>
    <h1>URL Shortener</h1>

    <!-- Form -->
    <form method="post" action="/url">
      <input type="url" name="url" placeholder="https://example.com" required />
      <button type="submit">Generate</button>
    </form>

    <!-- Optional: Latest URL message -->
    <% if (typeof newUrl !== "undefined" && newUrl) { %>
      <p style="text-align:center; color:green; font-weight:600;">ðŸŽ‰ Your short URL is ready: <a href="<%= newUrl %>" target="_blank" class="short-link"><%= newUrl %></a></p>
    <% } %>

    <!-- URLs Table -->
    <% if (urls && urls.length > 0) { %>
      <table>
        <thead>
          <tr>
            <th>S. No</th>
            <th>ShortID</th>
            <th>Redirect</th>
            <th>Clicks</th>
          </tr>
        </thead>
        <tbody>
          <% urls.forEach((u, index) => { %>
            <tr>
              <td><%= index + 1 %></td>
              <td><a href="/url/<%= u.shortId %>" target="_blank" class="short-link"><%= u.shortId %></a></td>
              <td><%= u.redirectURL %></td>
              <td><%= u.visitHistory.length %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } %>
  </body>
</html>
